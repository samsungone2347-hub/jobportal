{% extends 'base/base.html' %}

{% block title %}{{ job.title }} - Job Portal{% endblock %}

{% block content %}
<div class="card">
    <div class="card-header">
        <h2>{{ job.title }}</h2>
    </div>
    <div class="card-body">
        <p><strong>Company:</strong> {{ job.employer.company_name }}</p>
        <p><strong>Location:</strong> {{ job.location }}</p>
        <p><strong>Type:</strong> {{ job.get_job_type_display }}</p>
        <p><strong>Category:</strong> {{ job.category }}</p>
        {% if job.salary_min and job.salary_max %}
            <p><strong>Salary Range:</strong> ${{ job.salary_min }} - ${{ job.salary_max }}</p>
        {% endif %}
        <hr>
        <h4>Job Description</h4>
        <p>{{ job.description }}</p>
        <hr>
        <h4>Requirements</h4>
        <p>{{ job.requirements }}</p>
        <hr>
        <p><small>Posted on: {{ job.created_at|date:"F d, Y" }}</small></p>
        
        {% if user.is_authenticated and user.is_jobseeker %}
            {% if already_applied %}
                <button class="btn btn-secondary" disabled>Already Applied</button>
            {% else %}
                <a href="{% url 'apply_job' job.pk %}" class="btn btn-success">Apply Now</a>
            {% endif %}
        {% elif not user.is_authenticated %}
            <a href="{% url 'login' %}" class="btn btn-primary">Login to Apply</a>
        {% endif %}
        
        <a href="{% url 'home' %}" class="btn btn-secondary">Back to Jobs</a>
    </div>
</div>
{% endblock %}
